
# 11.02 Микросервисы: принципы"
>Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры. Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: API Gateway

>Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.
>Решение должно соответствовать следующим требованиям:

* Маршрутизация запросов к нужному сервису на основе конфигурации
* Возможность проверки аутентификационной информации в запросах
* Обеспечение терминации HTTPS
>Обоснуйте свой выбор.

**Ответ к задаче 1**

*Шлюз API — это слой, который проходит между клиентами и службами. Вместо того, чтобы клиенты отправляли запросы непосредственно к отдельным службам, они отправляют их на шлюз API, а он, в свою очередь, передает запросы следующей службе.*

| Программный продукт | Маршрутизация запросов | Аутентификация в запросах | Терминация HTTPS | Модель распространения |
|:---:|:---:|:---:|:---:|:---:|
| Kong | ✔ | ✔ | ✔ | Open Source |
| Apache APISIX | ✔ | ✔ | ✔ | Open Source |
| Tyk           | ✔ | Tyk Identity Broker (TIB)  | ✔ | Open Source |
| KrakenD       | backend/endpoint | JWT | krakend-httpsecure | Open Source |

*Реализовать API Gateway можно с помощью Kong (API-шлюз с открытым исходным кодом), который основан на прокси-сервере NGINX и занимает третье место среди самых популярных HTTP-серверов.*
https://www.cyberlands.io/opensourceapigateways


## Задача 2: Брокер сообщений
>Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.
>Решение должно соответствовать следующим требованиям:

* Поддержка кластеризации для обеспечения надежности
* Хранение сообщений на диске в процессе доставки
* Высокая скорость работы
* Поддержка различных форматов сообщений
* Разделение прав доступа к различным потокам сообщений
* Протота эксплуатации
>Обоснуйте свой выбор.


| Требования | Apache Kafka | RabbitMQ  | Platform V Corax (на базе  Apache Kafka)|
|:---:|:---:|:---:|:---:|
| Поддержка кластеризации для обеспечения надежности   | ✔ | ✔ | ✔ |
| Хранение сообщений на диске в процессе доставки      | ✔ | ✔ | ✔ |
| Высокая скорость работы                              | ✔ | ✔ | ✔ |
| Поддержка различных форматов сообщений               | ✔ | ✔ | ✔ |
| Разделение прав доступа к различным потокам сообщений| ✔ | ✔ | ✔ |
| Протота эксплуатации                                 | X | ✔ | ✔ |

*Главная задача брокера — обеспечение связи и обмена информацией между приложениями или отдельными модулями в режиме реального времени* Главный протокол представлен - AMQP (Advanced Message Queuing Protocol) расширенный протокол очереди сообщений .

*Брокер сообщений можно выбрать RabbitMQ.* 
*Для RabbitMQ написано множество API для популярных языков программировани, также прост и удобен в использовании через удобный инфтерфейс (на сайте разработчика моножество кода для конкретного языка программирования)*

*RabbitMQ сам отдает сообщения consumer в отличии от kafka который хранит сообщения на диске и отдает их когда к нему обращается consumer.*