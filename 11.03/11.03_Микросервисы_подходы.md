# Домашнее задание к занятию "11.03 Микросервисы: подходы"
>Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры. Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: Обеспечить разработку

>Предложите решение для обеспечения процесса разработки: хранение исходного кода, непрерывная интеграция и непрерывная поставка. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

>Решение должно соответствовать следующим требованиям:


*   Облачная система;
*   Система контроля версий Git;
*   Репозиторий на каждый сервис;
*   Запуск сборки по событию из системы контроля версий;
*   Запуск сборки по кнопке с указанием параметров;
*   Возможность привязать настройки к каждой сборке;
*   Возможность создания шаблонов для различных конфигураций сборок;
*   Возможность безопасного хранения секретных данных: пароли, ключи доступа;
*   Несколько конфигураций для сборки из одного репозитория;
*   Кастомные шаги при сборке;
*   Собственные докер образы для сборки проектов;
*   Возможность развернуть агентов сборки на собственных серверах;
*   Возможность параллельного запуска нескольких сборок;
*   Возможность параллельного запуска тестов;

>Обоснуйте свой выбор.

**Ответ к задаче 1**

*Если предполагается с чистого листа начало запуска CI/CD, то можно рассмотреть несколько вариантов:

| N | Требования | Jenkins | TeamCity |GitLab| Bamboo|
|:---:|:---:|:---:|:---:|:---:|:---:|
|1|Система контроля версий Git|✔|✔|✔|✔|
|2|Репозиторий на каждый сервис|✔|✔|✔| |
|3|Запуск сборки по событию из системы контроля версий|✔| | | |
|4|Запуск сборки по кнопке с указанием параметров|✔| | | |
|5|Возможность привязать настройки к каждой сборке|✔| | | |
|6|Возможность создания шаблонов для различных конфигураций сборок|✔| | | |
|7|Возможность безопасного хранения секретных данных: пароли, ключи доступа |✔| | | |
|8|Несколько конфигураций для сборки из одного репозитория|✔| |  |  |
|9|Кастомные шаги при сборке|✔| |  |  |
|10|Собственные докер образы для сборки проектов|✔| |  |  |
|11|Возможность развернуть агентов сборки на собственных серверах| ✔ | |  |  |
|12|Возможность параллельного запуска нескольких сборок|✔|X|✔|  |
|13|Возможность параллельного запуска тестов|✔|X|✔|X|

Atlassian Bamboo -главное преимущество - тесная связь с другими продуктами Atlassian - поэтому если нет проблем с денежными средставми и предполагается внедрение или уже использование Jira, Bitbucket, то Atlassian Bamboo будет хорошим решением для CI

TeamCity (JetBrains) - 
Travis CI

устанавливать конфигурировать (терраформ+ансибл)
подготавливать БД  роли гранты (БД все что связано с инфраструктурной связкой)
нагрузка на БД
разработка архитектуры БД
отслежить логи БД (Slow-log)
репликации разработать, переключения при падении
оптимизация посредством конфигурирования (шардирование)



GiTLab:
Облачная система;
*   Система контроля версий Git;
*   Репозиторий на каждый сервис;
*   Запуск сборки по событию из системы контроля версий;
*   Запуск сборки по кнопке с указанием параметров;
*   Возможность привязать настройки к каждой сборке;
*   Возможность создания шаблонов для различных конфигураций сборок;
*   Возможность безопасного хранения секретных данных: пароли, ключи доступа;
*   Несколько конфигураций для сборки из одного репозитория;
*   Кастомные шаги при сборке;
*   Собственные докер образы для сборки проектов;
*   Возможность развернуть агентов сборки на собственных серверах;
*   Возможность параллельного запуска нескольких сборок;
*   Возможность параллельного запуска тестов;


## Задача 2: Логи

>Предложите решение для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

>Решение должно соответствовать следующим требованиям:


*   Сбор логов в центральное хранилище со всех хостов обслуживающих систему;
*   Минимальные требования к приложениям, сбор логов из stdout;
*   Гарантированная доставка логов до центрального хранилища;
*   Обеспечение поиска и фильтрации по записям логов;
*   Обеспечение пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов;
*   Возможность дать ссылку на сохраненный поиск по записям логов;

>Обоснуйте свой выбор.

**Ответ к задаче 2**

## Задача 3: Мониторинг

>Предложите решение для обеспечения сбора и анализа состояния хостов и сервисов в микросервисной архитектуре. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

>Решение должно соответствовать следующим требованиям:

*   Сбор метрик со всех хостов, обслуживающих систему;
*   Сбор метрик состояния ресурсов хостов: CPU, RAM, HDD, Network;
*   Сбор метрик потребляемых ресурсов для каждого сервиса: CPU, RAM, HDD, Network;
*   Сбор метрик, специфичных для каждого сервиса;
*   Пользовательский интерфейс с возможностью делать запросы и агрегировать информацию;
*   Пользовательский интерфейс с возможность настраивать различные панели для отслеживания состояния системы;
>Обоснуйте свой выбор.

**Ответ к задаче 3**

